@model PalRSA.Core.DataAccess.CFIRegisterUser

@{
    ViewBag.Title = "Data Recapture Form";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("edit", new { id=id})">Biodata</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("addemployment", new { id=id})">Employment Details</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("AddNok", new { id=id})">Next of Kin</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("AddSalary", new { id=id})">Salary Structure</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("AddImages", new { id=id})"><span>Upload Images</span></a></li>
            <li class="breadcrumb-item"><a href="#"><span>Support Documents)</span></a></li>
        </ol>
    </nav>*@

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.UserId)
<div class="row">
    <!-- left column -->
    <div class="col-md-12">
        <!-- general form elements -->
        <div class="box box-default">
            <div class="box-header with-border">
                <h3 class="box-title">Personal Information</h3>
            </div>
            <div class="box-body divBoxHeight">
                @*<div class="row">*@

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">RSA PIN : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.Pin, new { @class = "form-control", @readonly = "readonly", @Value = ViewBag.userReg.Pin })
                                @Html.ValidationMessageFor(m => m.Pin, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">PFA Name : </label>
                            <div class="col-md-7">
                                @Html.TextBox("PFAName", "Pensions Alliance Limited", new { @class = "form-control", @readonly = "readonly" })
                                @Html.ValidationMessageFor(m => m.PFAName, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">RSA Status : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("EmployeeStatusId", null, "Select Status", htmlAttributes: new { @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.EmployeeStatusId, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Title : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("TitleId", null, "Select Title", htmlAttributes: new { @class = "form-control", @Value = ViewBag.userReg.Title })
                                @Html.ValidationMessageFor(m => m.TitleId, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Surname : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.Surname, new { @class = "form-control", @readonly = "readonly", @Value = ViewBag.userReg.Surname })
                                @Html.ValidationMessageFor(m => m.Surname, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">First Name : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control", @readonly = "readonly", @Value = ViewBag.userReg.FirstName })
                                @Html.ValidationMessageFor(m => m.FirstName, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>


                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Middle Name : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.MiddleName, new { @class = "form-control", @Value = ViewBag.userReg.MiddleName })
                                @Html.ValidationMessageFor(m => m.MiddleName, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="control-label col-md-5">Maiden Name : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.MotherMaidenName, new { @class = "form-control", @Value = ViewBag.userReg.MaidenName })
                                @Html.ValidationMessageFor(m => m.MotherMaidenName, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Gender : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("GenderId", null, "-- Select Gender --", htmlAttributes: new { @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.GenderId, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Maritial Status : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("MaritalStatusId", null, "-- Select Marital Status --", htmlAttributes: new { @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.MaritalStatusId, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label class="control-label col-md-5">NIN : </label>
                        <div class="col-md-7">
                            @Html.TextBoxFor(m => m.NIN, new { @class = "form-control", @Value = ViewBag.userReg.NIN })
                        </div>
                    </div>


                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="control-label col-md-5">BVN : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.BVN, new { @class = "form-control", @Value = ViewBag.userReg.BVN })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group doubleRequired">
                            <label class="control-label col-md-5">IPN (Non-Nigerians Only) : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.IPN, new { @class = "form-control" })
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-group required">
                                <label class="control-label col-md-5">Date Of Birth: </label>
                                <div class="col-md-7">
                                    @Html.TextBoxFor(m => m.DateOfBirth, new { @class = "datePicker", @style = "height: 34px;margin-right: 7px;" })
                                    @Html.ValidationMessageFor(m => m.DateOfBirth, "", new { @class = "text-red", @style = "display:block;" })
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Nationality: </label>
                            <div class="col-md-7">
                                @Html.DropDownList("NationalityId", null, "Select Title", htmlAttributes: new { @class = "form-control" })
                                @*@Html.DropDownListFor(m => m.NationalityId, new SelectList(Model.NationalitiesList, "NationalityId","Name"), "-- Select Nationality --",
                                    new
                                    {
                                        @class = "form-control"
                                    })*@
                                @Html.ValidationMessageFor(m => m.NationalityId, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-group required">
                                <label class="control-label col-md-5">Place of Birth : </label>
                                <div class="col-md-7">
                                    @Html.TextBoxFor(m => m.PlaceOfBirth, new { @class = "form-control", @Value = ViewBag.userReg.PlaceOfBirth })
                                    @Html.ValidationMessageFor(m => m.PlaceOfBirth, "", new { @class = "text-red" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group doubleRequired">
                            <label class="control-label col-md-5">State Of Origin : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("PersonalStateOfOriginId", null, "Select State of Origin", htmlAttributes: new { @class = "form-control" })
                                @*@Html.DropDownListFor(m => m.PersonalStateOfOriginId, new SelectList(Model.StateOfOriginsList, "StateOfOriginId", "Name"), "-- Select State Of Origin --",
                                    new
                                    {
                                        @class = "form-control"
                                    })*@
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-group doubleRequired">
                                <label class="control-label col-md-5">Local Government Area (Nigerian Only): </label>
                                <div class="col-md-7">
                                    @Html.DropDownList("LGAId", null, "Select LGA", htmlAttributes: new { @class = "form-control" })
                                    @*@Html.DropDownListFor(m => m.LGAId, new SelectList(Model.LgasList, "LGAId", "Name"), "-- Select LGA --",
                                        new
                                        {
                                            @class = "form-control"
                                        })*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Maiden/Former Name : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.MaidenName, new { @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.MaidenName, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="box box-default">
            <div class="box-header with-border">
                <h3 class="box-title">Residential Address</h3>
            </div>
            <div class="box-body divBoxHeight">
                @*<div class="row">*@
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Residential Address : </label>
                            <div class="col-md-7">
                                <label>@Html.RadioButtonFor(m => m.IsNigerian, true, new { Checked = "checked" })Nigeria</label>
                                <label>@Html.RadioButtonFor(m => m.IsNigerian, false)Abroad</label>
                                @Html.ValidationMessageFor(m => m.IsNigerian, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">House No./Name : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.HouseNo, new { @class = "form-control", @Value = ViewBag.userReg.HouseNo })
                                @Html.ValidationMessageFor(m => m.HouseNo, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Street Name : </label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.StreetName, new { @class = "form-control", @Value = ViewBag.userReg.StreetName })
                                @Html.ValidationMessageFor(m => m.StreetName, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>


                    <div class="col-md-6">
                        <div class="form-group doubleRequired">
                            <label class="control-label col-md-5">Village/Town/City :</label>
                            <div class="col-md-7">
                                @Html.TextBoxFor(m => m.City, new { @class = "form-control", @Value = ViewBag.userReg.City })
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group required">
                            <label class="control-label col-md-5">Country Residence Name : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("CountryOfResidanceId", null, "Select country", htmlAttributes: new { @class = "form-control" })
                                @*@Html.DropDownListFor(m => m.CountryOfResidanceId, new SelectList(Model.CountryList, "CountryId", "Name"), "-- Select Country --", new { @class = "form-control" })*@
                                @Html.ValidationMessageFor(m => m.CountryOfResidanceId, "", new { @class = "text-red" })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group doubleRequired">
                            <label class="control-label col-md-5">State of Residence Code : </label>
                            <div class="col-md-7">
                                @*@Html.TextBoxFor(m => m.StateCode, new { @class = "form-control" })*@
                                @Html.DropDownList("StateCode", null, "Select state", htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group doubleRequired">
                            <label class="control-label col-md-5">LGA Code : </label>
                            <div class="col-md-7">
                                @Html.DropDownList("LGACode", null, "Select LGA", htmlAttributes: new { @class = "form-control" })
                                @*@Html.TextBoxFor(m => m.LGACode, new { @class = "form-control" })*@
                            </div>
                        </div>
                    </div>
                    @*<div class="col-md-6">
                            <div class="form-group doubleRequired">
                                <label class="control-label col-md-5">Country Residence Code : </label>
                                <div class="col-md-7">
                                    @Html.TextBoxFor(m => m.CountryCode, new { @class = "form-control" })
                                </div>
                            </div>
                        </div>*@
                </div>

            </div>
            <div class="row">

                <div class="col-md-6">
                    <div class="form-group doubleRequired">
                        <label class="control-label col-md-5">ZIP Code : </label>
                        <div class="col-md-7">
                            @Html.TextBoxFor(m => m.ZIP, new { @class = "form-control" })
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-5">P.O.Box or PMB(if any) : <br /></label>
                        <div class="col-md-7">
                            @Html.TextBoxFor(m => m.POBox, new { @class = "form-control", @Value = ViewBag.userReg.POBox })
                            @Html.ValidationMessageFor(m => m.POBox, "", new { @class = "text-red" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding-top:1em">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-5">Personal Email Address: </label>
                        <div class="col-md-7">
                            @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @Value = ViewBag.userReg.Email })
                            @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-red" })
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group required">
                        <label class="control-label col-md-5">Phone No.: Country Code (Tel.): </label>
                        <div class="col-md-7">
                            @Html.TextBoxFor(m => m.Phone, new { @class = "form-control", @Value = ViewBag.userReg.Phone })
                            @Html.ValidationMessageFor(m => m.Phone, "", new { @class = "text-red" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-5">Mobile Phone: </label>
                        <div class="col-md-7">
                            @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control", @Value = ViewBag.userReg.Mobile })
                            @Html.ValidationMessageFor(m => m.Mobile, "", new { @class = "text-red" })
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    @*<div class="row">
        <div class="col-md-2">
            <button type="button" href="javascript:void(0)" onclick="$('#rsaHolder').click();" id="pretab" class="btn btn-block btn-primary ">Previous</button>
        </div>
        <div class="col-md-2">
            <button type="button" href="javascript:void(0)" onclick="$('#employmentRecord').click();" id="nexttab" class="btn btn-block btn-primary ">Next</button>
        </div>
    </div>*@

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Save & Continue >>" class="btn btn-primary" />
        </div>
    </div>

</div>

}




@section scripts{
    <script>

        $(function () {
            $('input[type=submit]').click(function (e) {
                debugger;
                
                var selected = $("input[type='radio'][name='IsNigerian']:checked");
                var isNig = selected.val();

                var nationality = $('#NationalityId option:selected').text();
                var countryOfResidence = $('#CountryOfResidanceId  option:selected').text();

                // $('#NationalityId option:selected').text() != 'Nigerian' && $('#NationalityId option:selected').text() != '-- Select Nationality --'
                if ($('#NationalityId option:selected').text() === '') {
                    e.preventDefault();
                    alert("NationalityId is required.");
                    $('#NationalityId').focus();
                    return;
                }
                if (nationality == 'Nigeria') {

                    if ($('#PersonalStateOfOriginId option:selected').val() == '') {
                        e.preventDefault();
                        alert("Personal State Of Origin is required in Personal Data.");
                        $('#PersonalStateOfOriginId').focus();
                        return;
                    }
                    else if ($('#LGAId option:selected').val() == '') {
                        e.preventDefault();
                        alert("LGA is required in Personal Data.");
                        $('#LGAId').focus();
                        return;
                    }
                }

                if (countryOfResidence === 'Nigeria') {
                    // Check for residence
                    if ($('#HouseNo').val() == '') {
                        e.preventDefault();
                        alert("HouseNo is required in Personal Data.");
                        $('#HouseNo').focus();
                        return;
                    }
                    else if ($('#StreetName').val() == '') {
                        e.preventDefault();
                        alert("StreetName is required in Personal Data.");
                        $('#StreetName').focus();
                        return;
                    }
                    else if ($('#City').val() == '') {
                        e.preventDefault();
                        alert("City is required in Personal Data.");
                        $('#City').focus();
                        return;
                    }
                    else if ($('#StateCode').val() == '') {
                        e.preventDefault();
                        alert("State of Residence Code is required in Personal Data.");
                        $('#StateCode').focus();
                        return;
                    }
                    else if ($('#LGACode').val() == '') {
                        e.preventDefault();
                        alert("LGA Code is required in Personal Data.");
                        $('#LGACode').focus();
                        return;
                    }
                    else if ($('#City').val() == '') {
                        e.preventDefault();
                        alert("City is required in Personal Data.");
                        $('#City').focus();
                        return;
                    }
                }
            });

            $('.datePicker').datepicker({
                defaultViewDate: null,
                dateFormat: 'dd/mm/yyyy',
                changeMonth: true,
                changeYear: true,
                yearRange: '-100:+100',
                buttonImage: "../../images/calender-icon.png",
                showOn: "both",
                buttonImageOnly: true,
                autoclose: true,
                buttonImageText: "Calendar",
                format: 'dd/mm/yyyy',
                todayHighlight: true

            }).on('changeDate', function (selected) {
                if (callBack != undefined) {
                    callBack(this, selected);
                }
            });

            //  enableButtons();

            $('#PersonalStateOfOriginId').change(function () {

                var selected = $("#PersonalStateOfOriginId").find(':selected').val();


                $("#LGAId").html("<option value='Loading...'>Loading... </option>");
                if (selected == "") {
                    $("#LGAId").html("<option value='Please select state'>Please select state</option>");
                }

                var jqxhr = $.get("/Recapture/GetLGA?StateId=" + selected, function (response, status, xhr) {
                    $("#LGAId").html(response);

                }).fail(function (jqxhr, textStatus, error) {
                    var err = textStatus + ", " + error;
                    alert("Request Failed: " + err);
                });

            });

            $('#KinStateId').change(function () {

                var selected = $("#KinStateId").find(':selected').val();

                $("#KinLGAId1").html("<option value='Loading...'>Loading... </option>");
                if (selected == "") {
                    $("#KinLGAId1").html("<option value='Please select NOK state'>Please select NOK state</option>");
                }

                var jqxhr = $.get("/Recapture/GetLGA?StateId=" + selected, function (response, status, xhr) {
                    $("#KinLGAId1").html(response);

                }).fail(function (jqxhr, textStatus, error) {
                    var err = textStatus + ", " + error;
                    // alert("Request Failed: " + err);
                });

            });

            $('#StateCode').change(function () {

                var selected = $("#StateCode").find(':selected').val();

                $("#LGACode").html("<option value='Loading...'>Loading... </option>");
                if (selected == "") {
                    $("#LGACode").html("<option value='Please select state'>Please select state</option>");
                }

                var jqxhr = $.get("/Recapture/GetLGACode?StateCode=" + selected, function (response, status, xhr) {
                    $("#LGACode").html(response);

                }).fail(function (jqxhr, textStatus, error) {
                    var err = textStatus + ", " + error;
                    alert("Request Failed: " + err);
                });
            });

        });
    </script>

}
